/**
    é¢˜ç›®ï¼š
    è¯·å®ç°ä¸€ä¸ªå‡½æ•°ç”¨æ¥åŒ¹é…åŒ…æ‹¬'.'å’Œ'*'çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚æ¨¡å¼ä¸­çš„å­—ç¬¦'.'è¡¨ç¤ºä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œè€Œ'*'è¡¨ç¤ºå®ƒå‰é¢çš„å­—ç¬¦å¯ä»¥å‡ºç°ä»»æ„æ¬¡ï¼ˆåŒ…å«0æ¬¡ï¼‰ã€‚ åœ¨æœ¬é¢˜ä¸­ï¼ŒåŒ¹é…æ˜¯æŒ‡å­—ç¬¦ä¸²çš„æ‰€æœ‰å­—ç¬¦åŒ¹é…æ•´ä¸ªæ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸²"aaa"ä¸æ¨¡å¼"a.a"å’Œ"ab*ac*a"åŒ¹é…ï¼Œä½†æ˜¯ä¸"aa.a"å’Œ"ab*a"å‡ä¸åŒ¹é…
 */

// time: 
// space: 
// æœ‰é™çŠ¶æ€è‡ªåŠ¨æœº FSA
function isNumber(s) {
    const states = {
        'å¼€å¤´ç©ºæ ¼': {
            'ç©ºæ ¼': 'å¼€å¤´ç©ºæ ¼',
            '+-': 'ç¬¦å·ä½',
            'æ•°å­—': 'æ•´æ•°éƒ¨åˆ†',
            '.': 'å°æ•°ç‚¹2',
        },

        'ç¬¦å·ä½': {
            'æ•°å­—': 'æ•´æ•°éƒ¨åˆ†',
            '.': 'å°æ•°ç‚¹2',
        },

        'æ•´æ•°éƒ¨åˆ†': {
            'æ•°å­—': 'æ•´æ•°éƒ¨åˆ†',
            '.': 'å°æ•°ç‚¹',
            'eE': 'æŒ‡æ•°ç¬¦å·',
            'ç©ºæ ¼': 'ç»“å°¾ç©ºæ ¼'
        },

        'å°æ•°ç‚¹': {
            'æ•°å­—': 'å°æ•°éƒ¨åˆ†',
            'eE': 'æŒ‡æ•°ç¬¦å·',
            'ç©ºæ ¼': 'ç»“å°¾ç©ºæ ¼'
        },
        'å°æ•°éƒ¨åˆ†': {
            'æ•°å­—': 'å°æ•°éƒ¨åˆ†',
            'eE': 'æŒ‡æ•°ç¬¦å·',
            'ç©ºæ ¼': 'ç»“å°¾ç©ºæ ¼'
        },

        'å°æ•°ç‚¹2': {
            'æ•°å­—': 'å°æ•°éƒ¨åˆ†',
        },

        'æŒ‡æ•°ç¬¦å·': {
            '+-': 'æŒ‡æ•°ç¬¦å·ä½',
            'æ•°å­—': 'æŒ‡æ•°éƒ¨åˆ†',
        },
        'æŒ‡æ•°ç¬¦å·ä½': {
            'æ•°å­—': 'æŒ‡æ•°éƒ¨åˆ†',
        },
        'æŒ‡æ•°éƒ¨åˆ†': {
            'æ•°å­—': 'æŒ‡æ•°éƒ¨åˆ†',
            'ç©ºæ ¼': 'ç»“å°¾ç©ºæ ¼'
        },

        'ç»“å°¾ç©ºæ ¼': {
            'ç©ºæ ¼': 'ç»“å°¾ç©ºæ ¼'
        }
    }

    const isBlank = c => c === ' '
    const isNum = c => {
        c = c.charCodeAt(0)
        return c >= c0 && c <= c9
    }
    const isE = c => c === 'e' || c === 'E'
    const isSymbol = c => c === '+' || c === '-'
    const isDot = c => c === '.'

    let p = 'å¼€å¤´ç©ºæ ¼'
    for (let c of s) {
        let input = null
        if (isBlank(c)) {
            input = 'ç©ºæ ¼'
        } else if (isNum(c)) {
            input = 'æ•°å­—'
        } else if (isE(c)) {
            input = 'eE'
        } else if (isSymbol(c)) {
            input = '+-'
        } else if (isDot(c)) {
            input = '.'
        } else {
            input = '?' // æœªçŸ¥è¾“å…¥
        }
        if (!(input in states[p])) return false
        p = states[p][input]
    }
    return p === 'ç»“å°¾ç©ºæ ¼' || p === 'æ•´æ•°éƒ¨åˆ†' || p === 'å°æ•°ç‚¹' || p === 'å°æ•°éƒ¨åˆ†' || p === 'æŒ‡æ•°éƒ¨åˆ†'
}
const c0 = '0'.charCodeAt(0)
const c9 = '9'.charCodeAt(0)

// æ­£åˆ™ğŸ˜„
function isNumber(s) {
    return /^\s*(\+|\-)?((\d+)|(\d+\.\d*)|(\.\d+))(e(\+|\-)?\d+)?\s*$/i.test(s)
}